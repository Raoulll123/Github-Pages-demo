<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.2.2/echarts.min.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="./script/d3-cloud-master/d3-cloud-master/build/d3.layout.cloud.js"></script>
</head>

<style>
    *{
        margin: 0;
        padding: 0;
    }
    body{
        overflow: hidden;
    }
    #div_p{
        width: 100vw;
        height: 100vh;
        display: flex;
        position: absolute;
        justify-content: center;
        align-items: center;
        font-size: 90px;
        top:0;
        animation: slide 5s forwards 1s;
    }
    #div_537 {
        position: absolute;
        width: 100%;
        height: 450px;
        text-align: center;
        background-color: transparent;
        animation: slide2 2.5s forwards 6s;
        top: 100vh;
    }
    #div_main {
        position: absolute;
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr 1fr;
        width: 100vw;
        height: 100vh;
        background-color: transparent;
        /* animation: slide1 3s forwards 6s; */
        animation: slide1 3s forwards;
        top: 100vh;
    }
    .tooltip {
        position: absolute;
        text-align: center;
        padding: 10px;
        background: #f8f8f8;
        border: 1px solid #ccc;
        border-radius: 4px;
        pointer-events: none;
        display: none;
      }
    @keyframes slide {
        0% { top: 0; }
        100% { top: -100vh; }
    }

    @keyframes slide1 {
        0% { top: calc(100vh + 450px); }
        100% { top: 0; }
    }

    @keyframes slide2 {
        0% { top: 100vh; }
        100% { top: -450px; }
    }
</style>
<body>
    <div id="div_p">
        <p>啊啊啊小心直升机！！</p>
    </div>
    <div id="div_537">
        <img src="./img/memory_index2/8.gif" alt = '537 aeroplane!'>
    </div>
    <div id="div_main">
        <div style="text-align: center;border-right: 0.5px solid black;border-bottom: 0.5px solid black;">
            <div id="grid" style="width: 40vw;height:45vh;margin-left: 5vw;margin-top: 2vh;"></div>
            <p style="margin-top: -1vh;">都怪你，害我不能早睡了(～￣▽￣)～</p>
        </div>
        <div style="text-align:center;background-color: transparent;border-left: 0.5px solid black;border-bottom: 0.5px solid black;">
            <div id="grid2" style="width: 40vw;height:45vh;margin-left: 5vw;margin-top: 2vh;"></div>
            <p style="margin-top: -1vh;">中间少的应该是去和小小刘玩啦！</p>
        </div>
        <div style="background-color: transparent;border-top:0.5px solid black;border-right: 0.5px solid black;text-align: center;">
            <div>
                <p style="font-size:20px;padding-top: 3vh;"><b>说的最多的词！</b></p>
            </div>
            <div id="grid3-container" style="width: 40vw;height:45vh;margin-left: 5vw;">
                <div id="grid3"></div>
                <p style="font-size:18px">恭喜"宝宝"和"乖乖"以断崖式领先拿到前两名！实至名归！</p>
            </div>
            <div id="tooltip" class="tooltip"></div>
        </div>
        <div style="background-color: transparent;border-top:0.5px solid black;border-left: 0.5px solid black;text-align: center;">
            <div>
                <p style="font-size:20px;padding-top: 3vh;"><b>猜猜发的最多的表情是哪个？</b></p>
            </div>
            <div style="margin-top: 5vh;">
                <img src="https://mmbiz.qpic.cn/mmemoticon/Q3auHgzwzM7L7AZphhrl9eMaYwYOeMKUXZqsweTWMQsp7uINh8YVFibgGXuqKiaH1Q/0" alt="gif">
            </div>
            <div>
                <p style="font-size:18px;padding-top: 10vh;">尴尬，好像很好猜，但是我们一共发了74563个呢！</p>
            </div>
        </div>

</body>
</html>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('grid'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '让我看看每天哪个时间话最多！',
                x:'center'
            },
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['0:00', '1:00', '2:00', '3:00', '4:00', '5:00', '6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00'],
                axisLabel: {
                    formatter: function(value, index) {
                        return index % 2 === 0 ? value : '';
                    }
                },
                splitLine: {
                    show: true
                }
            },
            
            yAxis: {
                type: 'value',
                splitLine: {
                    show: true
                }
            },

            series: [{
                data: [103225, 28123, 7191, 2028, 167, 480, 638, 3198, 9860, 16810, 38805, 43070, 70558, 72348, 42516, 22270, 40727, 45798, 59735, 70831, 53353, 53239, 107119, 153786], 
                type: 'line',
                // areaStyle: {}
                markPoint: {
                    data: [
                        {type: 'max', name: '最大值'},
                        {type: 'min', name: '最小值'}
                    ]
                },
                markLine: {
                    data: [
                        {type: 'average', name: '平均值'}
                    ]
                }
            }]
        };

        myChart.setOption(option);
    </script>
    <script type="text/javascript">
        var myChart = echarts.init(document.getElementById('grid2'));
        var option = {
            title: {
                text: '“热恋期过了”',
                x:'center'
            },
            visualMap: {
                show: false,
                min: 6430,
                max: 135308,
                inRange: {
                    color: ['rgb(254, 183, 121)', 'rgb(250, 127, 111)'] // 颜色渐变范围
                }
            },
            xAxis: {
                type: 'category',
                data: ['2022.7', '2022.8', '2022.9', '2022.10', '2022.11', '2022.12', '2023.1', '2023.2', '2023.3', '2023.4', '2023.5', '2023.6', '2023.7', '2023.8', '2023.9', '2023.10', '2023.11', '2023.12'],
                axisLabel: {
                    formatter: function (value, index) {
                        return index % 2 === 0 ? value : '';
                    }
                },
                splitLine: {
                    show: true
                }
            },
            yAxis: {
                type: 'value',
                splitLine: {
                    show: true
                }
            },
            series: [{
                data: [20430, 43705, 65271, 86409, 93976, 90089, 135308, 97300, 97686, 78115, 20921, 20220, 12256, 66718, 86430, 86210, 72708, 9377],
                type: 'bar',
                label: {
                    show: true, // 显示标签
                    position: 'top' // 标签位置
                }
            }]
        };
        myChart.setOption(option);
    </script>
    <script>
        var words = [
          {text: "乖乖", size: 6.48, count: 22480},
          {text: "宝宝", size: 8.762, count: 57762},
          {text: "感觉", size: 4.538, count: 9538},
          {text: "哈哈哈", size: 3.432, count: 5432},
          {text: "哈哈哈哈", size: 3.666, count: 4666},
          {text: "笨笨", size: 2.862, count: 2862},
          {text: "可爱", size: 2.778, count: 2778},
          {text: "姐姐", size: 5.216, count: 5216},
          {text: "亲亲", size: 4.186, count: 4186},
          {text: "抱抱", size: 1.216, count: 1216},
          {text: "哼哼", size: 1.516, count: 1516},
          {text: "晚安", size: 1.752, count: 1752},
          {text: "午安", size: 0.944, count: 944},
          {text: "小朋友", size: 0.926, count: 926},
          {text: "哇塞", size: 0.989, count: 989},
          {text: "开心", size: 0.785, count: 785},
          {text: "喜欢", size: 2.617, count: 2617},
          {text: "爱你", size: 1.216, count: 1216},
          {text: "嘿嘿", size: 2.916, count: 2916},
          {text: "吃饭", size: 0.863, count: 863},
          {text: "可恶", size: 1.249, count: 1249},
          {text: "色色", size: 1.233, count: 1233},
          {text: "打电话", size: 0.989, count: 989},
          {text: "宝贝", size: 0.875, count: 875},
          {text: "老公", size: 1.216, count: 1216},
          {text: "老婆", size: 0.216, count: 216},
          {text: "睡觉", size: 3.216, count: 3216},
          {text: "吃饭", size: 1.316, count: 1316},
          {text: "玩", size: 6.997, count: 6997},
          {text: "学习", size: 1.026, count: 1026},
          {text: "一起", size: 1.986, count: 1986},
        ];
  
        var container = d3.select("#grid3");
        var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
        // 创建词云布局
        var layout = d3.layout
          .cloud()
          .size([width * 0.3, height * 0.4])
          .words(words)
          .padding(7)
          .rotate(function () {
            // return ~~(Math.random() * 2) * 90;
            return (~~(Math.random() * 6) - 3) * 30;
            // return 0;
          })
          .font("Impact")
          .fontSize(function (d) {
            return d.size * 7;
          })
          .on("end", draw);
  
        // 设置每个单词的颜色
        layout.words().forEach(function (word) {
          word.color = getRandomColor();
        });
  
        // 绘制词云
        layout.start();
  
        //绘制函数
        var tooltip = d3.select("#tooltip");
  
        //绘制函数
        function draw(words) {
          d3.select("#grid3")
            .append("svg")
            .attr("width", layout.size()[0])
            .attr("height", layout.size()[1])
            .attr("style", "background-color:transparent")
            .append("g")
            .attr(
              "transform",
              "translate(" +
                layout.size()[0] / 2 +
                "," +
                layout.size()[1] / 2 +
                ")"
            )
            .selectAll("text")
            .data(words)
            .enter()
            .append("text")
            .style("font-size", function (d) {
              return d.size + "px";
            })
            .style("font-family", "Impact")
            .style("fill", function (d) {
              return d.color;
            }) // 设置每个单词的颜色
            .attr("text-anchor", "middle")
            .attr("transform", function (d) {
              return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
            })
            .text(function (d) {
              return d.text;
            })
            .on("mouseover", function (event, d) {
              tooltip
                .style("left", event.pageX + 10 + "px")
                .style("top", event.pageY - 10 + "px")
                .style("display", "inline-block")
                .html("词语: " + d.text + "<br>" + "数量: " + d.count);
            })
            .on("mouseout", function (d) {
              tooltip.style("display", "none");
            });
        }
        // 生成随机颜色
        function getRandomColor() {
          var letters = "0123456789ABCDEF";
          var color = "#";
          for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
          }
          return color;
        }
  
      </script>

    <script type="text/javascript">
        document.body.addEventListener('click', function() {
            window.location.href = './railway.html';
        });
    </script>
</body>
</html>
